vendor([0],{14:function(e,t,n){"use strict";function o(e,t){return"object"===(void 0===e?"undefined":r(e))?Object.keys(e).every(function(n){return o(e[n],t[n])}):e===t}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o},15:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i="history-",s=function(){function e(t,n,a){if(o(this,e),this.range=1/0,this.duration=1/0,this.hasStorage=!1,this.useStorage=!1,this.position=0,this.history=[],this.key=i+t,this.version=n,"undefined"==typeof localStorage)this.hasStorage=!1;else try{localStorage.setItem("test","test"),localStorage.removeItem("test"),this.hasStorage=!0}catch(e){this.hasStorage=!1}"object"===(void 0===a?"undefined":r(a))&&(a.useStorage&&(this.useStorage=a.useStorage),"number"==typeof a.range&&(this.range=a.range),"number"==typeof a.duration&&(this.duration=a.duration))}return a(e,[{key:"undo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.canUndo)throw new RangeError('Logger "'+this.name+'" cannot undo any more.');return this.load(this.depth+=e)}},{key:"redo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.canUndo)throw new RangeError('Logger "'+this.name+'" cannot redo any more.');return this.load(this.depth-=e)}},{key:"jump",value:function(e){var t=this.history.findIndex(function(t){return t.stamp===e});return-1!==t&&(this.cursor=t),this.depth}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.depth;if(0===this.length)throw new RangeError('Logger "'+this.name+'" has no history.');if(e>this.length||e<0)throw new RangeError("Depth should be in  to "+this.length);return JSON.parse(this.history[this.length-e].data)}},{key:"save",value:function(e){return this.history=this.history.slice(this.cursor-this.range,this.cursor+1).concat({data:JSON.stringify(e),stamp:Date.now().toString(10)+this.length.toString(10)}),this.depth=1,this.useStorage&&this.hasStorage&&localStorage.setItem(this.key,JSON.stringify({depth:this.depth,history:this.history,version:this.version,timestamp:Date.now()})),this}},{key:"empty",value:function(){return this.history=[],this.position=0,this}},{key:"restore",value:function(){if(!this.hasStorage)return!1;var e=localStorage.getItem(this.key)||'{"depth":1,"history":[{"data":"[{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"ニャオス\\"],\\"id\\":1,\\"focus\\":false},{\\"operator\\":\\"AND\\",\\"keywords\\":[\\"nyan\\",\\"cat\\"],\\"id\\":2,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"gutchom\\",\\"chom\\",\\"\\"],\\"id\\":3,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"ぐっちょむ\\",\\"ちょむ\\",\\"\\"],\\"id\\":4,\\"focus\\":false},{\\"operator\\":\\"NOR\\",\\"keywords\\":[\\"foo\\",\\"bar\\",\\"\\"],\\"id\\":5,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"fizz\\",\\"bazz\\",\\"\\"],\\"id\\":6,\\"focus\\":true}]","stamp":"15075758800883"},{"data":"[{\\"operator\\":\\"AND\\",\\"keywords\\":[\\"nyan\\",\\"cat\\"],\\"id\\":2,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"ぐっちょむ\\",\\"ちょむ\\",\\"\\"],\\"id\\":3,\\"focus\\":false}]","stamp":"15085492474244"},{"data":"[{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"ニャオス\\"],\\"id\\":1,\\"focus\\":false},{\\"operator\\":\\"AND\\",\\"keywords\\":[\\"nyan\\",\\"cat\\"],\\"id\\":2,\\"focus\\":false},{\\"operator\\":\\"NOR\\",\\"keywords\\":[\\"foo\\",\\"bar\\",\\"\\"],\\"id\\":3,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"fizz\\",\\"bazz\\",\\"\\"],\\"id\\":4,\\"focus\\":false}]","stamp":"15085493205835"},{"data":"[{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"chom\\"],\\"id\\":0,\\"focus\\":false}]","stamp":"15086865992956"},{"data":"[{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"nyan\\",\\"bazz\\"],\\"id\\":0,\\"focus\\":false}]","stamp":"15086885481517"},{"data":"[{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"nyan\\",\\"ニャオス\\"],\\"id\\":0,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"nyan\\",\\"bazz\\"],\\"id\\":1,\\"focus\\":true}]","stamp":"15087074816558"},{"data":"[{\\"operator\\":\\"NOT\\",\\"keywords\\":[\\"ニャオス\\"],\\"id\\":0,\\"focus\\":false},{\\"operator\\":\\"AND\\",\\"keywords\\":[\\"nyan\\",\\"cat\\"],\\"id\\":1,\\"focus\\":true},{\\"operator\\":\\"NOT\\",\\"keywords\\":[\\"hoge\\",\\"fuga\\"],\\"id\\":2,\\"focus\\":true}]","stamp":"15090300669589"},{"data":"[{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"nyan\\",\\"cat\\"],\\"id\\":0,\\"focus\\":false}]","stamp":"150903137107510"},{"data":"[{\\"operator\\":\\"NOT\\",\\"keywords\\":[\\"hoge\\",\\"fuga\\"],\\"id\\":1,\\"focus\\":false},{\\"operator\\":\\"AND\\",\\"keywords\\":[\\"nyan\\",\\"cat\\"],\\"id\\":2,\\"focus\\":false},{\\"operator\\":\\"NOR\\",\\"keywords\\":[\\"foo\\",\\"bar\\",\\"\\"],\\"id\\":3,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"fizz\\",\\"bazz\\",\\"\\"],\\"id\\":4,\\"focus\\":false},{\\"operator\\":\\"OR\\",\\"keywords\\":[\\"gutchom\\",\\"chom\\",\\"\\"],\\"id\\":5,\\"focus\\":false}]","stamp":"150903141171611"},{"data":"[{\\"id\\":0,\\"focus\\":false,\\"operator\\":\\"OR\\",\\"keywords\\":[\\"fizz\\"]}]","stamp":"150903331012211"},{"data":"[{\\"id\\":0,\\"focus\\":false,\\"operator\\":\\"OR\\",\\"keywords\\":[\\"fizz\\"]}]","stamp":"150903332291011"}],"version":1.5,"timestamp":1509033322910}';if(!e)return!1;var t=JSON.parse(e);return!(this.version<t.version)&&(this.version>t.version||Date.now()-t.timestamp>60*this.duration*60*1e3?(localStorage.removeItem(this.key),!1):(this.history=t.history.slice(-this.range),this.depth=t.depth,!0))}},{key:"name",get:function(){return this.key.slice(i.length)}},{key:"length",get:function(){return this.history.length}},{key:"stamp",get:function(){return this.history[this.cursor].stamp}},{key:"canUndo",get:function(){return this.length>0&&this.depth<this.length}},{key:"canRedo",get:function(){return this.length>0&&this.depth>1}},{key:"all",get:function(){return this.length>0?this.history.map(function(e){return JSON.parse(e.data)}):[]}},{key:"depth",get:function(){return this.length-this.cursor},set:function(e){this.cursor=this.length-e}},{key:"cursor",get:function(){return this.position},set:function(e){this.position=e>=this.length?this.length-1:e<=0?0:e}}]),e}();t.default=s},16:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.translate=t.operators=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(51),d=o(f),h=n(2),p=o(h),y=t.operators=["AND","OR","NOT"],m=t.translate={sign:{AND:"&",OR:"?",NOT:"-"},ja:{AND:"を全て含む",OR:"のどれかを含む",NOT:"を全て含まない"}},g=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state=s({},e.props.defaults,{confirming:!1,style:{}}),e.handleKeywordChange=function(t){e.setState({keywords:t}),e.props.onChange(e.props.position,{keywords:t})},e.handleKeywordOperatorChange=function(t){e.setState({operator:t.target.value}),e.props.onChange(e.props.position,{operator:t.target.value})},e.handleRemove=function(){e.state.confirming?e.setState({style:{transform:"scale(0)"}}):e.setState({confirming:!0})},e.handleCancelRemove=function(){e.setState({confirming:!1})},e.handleTransitionEnd=function(t){"transform"===t.propertyName&&e.props.onRemove(e.props.position)},e}return i(t,e),u(t,[{key:"render",value:function(){return c.default.createElement("li",{className:"query--term",style:this.state.style,onTransitionEnd:this.handleTransitionEnd},c.default.createElement("div",{className:(0,p.default)("query--confirm-deletion",{visible:this.state.confirming}),tabIndex:0,onClick:this.handleCancelRemove,onKeyDown:this.handleCancelRemove},c.default.createElement("button",{className:"query--confirm-deletion--remove",onClick:this.handleRemove},c.default.createElement("i",{className:"fa fa-trash-o"}))),c.default.createElement("button",{className:"query--remove",onClick:this.handleRemove},c.default.createElement("i",{className:"fa fa-trash-o"})),c.default.createElement(d.default,{defaults:this.state.keywords,focus:this.props.focus,choices:this.props.suggestions,onChange:this.handleKeywordChange}),c.default.createElement("select",{value:this.state.operator,onChange:this.handleKeywordOperatorChange},y.map(function(e,t){return c.default.createElement("option",{key:e,value:e},m.ja[e])})))}}]),t}(c.default.Component);t.default=g},2:function(e,t,n){"use strict";function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){return"object"===(void 0===e?"undefined":r(e))?Object.keys(e).filter(function(t){return!!e[t]}).join(" "):e}).join(" ")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o},48:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}n(49);var r=n(0),a=o(r),i=n(13),s=o(i),u=n(50),l=o(u);s.default.render(a.default.createElement(l.default,null),document.getElementById("app-main"))},49:function(e,t,n){"use strict";function o(e,t){return e[t]}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.refer=o;var a=n(14),i=function(e){return e&&e.__esModule?e:{default:e}}(a);Array.prototype.dedupe=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"string"==typeof e&&n.unshift(e),this.filter(function(t,r,a){return"function"==typeof e?-1>a.findIndex(function(n){return e(t,n)}):"string"==typeof e?r<=a.findIndex(function(e){return n.reduce(o,t)===n.reduce(o,e)}):r<=a.findIndex(function(e){return(0,i.default)(t,e)})})},Array.prototype.sortByKey=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if("object"!==r(this[0]))throw new TypeError("This array have to made of object.");return this.sort(function(e,n){return(e=t.reduce(o,e))<(n=t.reduce(o,n))?-1:e>n?1:0})}},50:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(0),f=o(c),d=n(15),h=o(d),p=n(16),y=o(p),m=n(54),g=o(m),b=n(58),v=o(b),w={id:0,focus:!1,operator:"OR",keywords:[]},k=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.logger=new h.default("query",1.5,{range:20,useStorage:!0}),n.queryId=0,n.handleQueryChange=function(e,t){n.setState({query:n.state.query.map(function(n,o){return o===e?u({},n,t):n})})},n.handleQueryRemove=function(e){n.setState({query:n.state.query.filter(function(t,n){return n!==e})})},n.handleAddClick=function(){n.setState({query:n.state.query.concat(u({},w,{id:++n.queryId,focus:!0}))})},n.handleSearchClick=function(){var e=n.state.query.filter(function(e){return e.keywords.filter(function(e){return e.length>0}).length>0});e.length>0&&(n.logger.save(e),n.setState({suggestions:n.suggestions})),alert("検索条件を履歴に保存しました。\n検索結果の表示は開発中です。")},n.handleRevertClick=function(){n.setState({isHistoryOpen:!0})},n.handleRevertCancel=function(){n.setState({isHistoryOpen:!1})},n.handleRevertSubmit=function(e){n.setState({query:e.map(function(e){return u({},e,{id:++n.queryId,focus:!1})}),isHistoryOpen:!1})},n.logger.restore(),n.state={query:[w],suggestions:n.suggestions,isHistoryOpen:!1},n}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return f.default.createElement("main",{className:"query"},f.default.createElement(v.default,{icon:"search",title:"検索"}),f.default.createElement("ul",null,this.state.query.map(function(t,n){return f.default.createElement(y.default,{key:t.id,focus:t.focus,position:n,defaults:t,suggestions:e.state.suggestions,onChange:e.handleQueryChange,onRemove:e.handleQueryRemove})}),f.default.createElement("li",{className:"query--dashboard"},f.default.createElement("button",{className:"query--button",onClick:this.handleRevertClick},f.default.createElement("i",{className:"fa fa-clock-o"})),f.default.createElement("button",{className:"query--button",onClick:this.handleAddClick},f.default.createElement("i",{className:"fa fa-plus"})),f.default.createElement("button",{className:"query--button",onClick:this.handleSearchClick},f.default.createElement("i",{className:"fa fa-search"})))),f.default.createElement(g.default,{history:this.logger.all.reverse(),visible:this.state.isHistoryOpen,onCancel:this.handleRevertCancel,onSubmit:this.handleRevertSubmit}))}},{key:"suggestions",get:function(){return this.logger.length>0?this.logger.all.reduce(function(e,t){return e.concat.apply(e,r(t.map(function(e){return e.keywords})))},[]).filter(function(e){return e.length>0}).filter(function(e,t,n){return t===n.lastIndexOf(e)}):[]}}]),t}(f.default.Component);t.default=k},51:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(52),d=o(f),h=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.kanaInput=!1,e.state={isDrawerOpen:!1,cursor:0,input:(e.props.defaults||[]).join(" ")},e.handleInputFocus=function(t){e.setState({isDrawerOpen:!0,input:t.currentTarget.value})},e.handleInputBlur=function(){var t=e.state.input.split(/[\s\u3000]/).filter(function(e){return e.length>0});e.setState({input:t.join(" "),isDrawerOpen:!1}),e.props.onChange(t)},e.handleInputChange=function(t){e.setState({input:t.target.value})},e.handleInputKeyDown=function(t){if(e.kanaInput=229===t.keyCode||e.kanaInput&&"Enter"!==t.key&&"Escape"!==t.key,!e.kanaInput)switch(t.key){case"Enter":case"Escape":e.input.blur();break;case" ":e.cursor>0&&(t.preventDefault(),e.handleDrawerChange(e.cursor));break;case"ArrowUp":e.cursor--;break;case"ArrowDown":e.cursor++}},e.handleDrawerChange=function(t){e.input.focus();var n=e.props.choices[e.props.choices.length-t],o=e.state.input.split(/[\s\u3000]/),r=o.filter(function(e){return e!==n}),a=r.concat(r.length<o.length?[]:n).join(" ")+" ";e.setState({input:a})},e.inputRefs=function(t){e.input=t},e.drawerRefs=function(t){e.drawer=t},e}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.focus&&this.input.focus()}},{key:"render",value:function(){return c.default.createElement("div",{className:"query-input"},c.default.createElement("input",{className:"textinput",placeholder:"スペース区切りで複数入力",value:this.state.input,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,ref:this.inputRefs}),c.default.createElement(d.default,{refs:this.drawerRefs,visible:this.state.isDrawerOpen,options:[].concat(r(this.props.choices)).reverse(),selected:this.state.input.split(/[\s\u3000]/),focusing:this.state.cursor-1,onChange:this.handleDrawerChange}))}},{key:"cursor",get:function(){return this.state.cursor},set:function(e){var t=e>this.props.choices.length?this.props.choices.length:e>0?e:0;if(this.props.choices.length>0&&t>0){var n=this.drawer.children[t-1],o=n.offsetTop+n.offsetHeight-this.drawer.offsetHeight;this.drawer.scrollTop<o&&this.drawer.scrollTo(0,o),this.drawer.scrollTop>n.offsetTop&&this.drawer.scrollTo(0,n.offsetTop)}this.setState({cursor:t,isDrawerOpen:this.props.choices.length>0&&t>0})}}]),t}(c.default.Component);t.default=h},52:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=o(r),i=n(53),s=o(i),u=n(2),l=o(u),c=function(e){return a.default.createElement("ul",{ref:e.refs,className:(0,l.default)("query-input--drawer",{visible:e.visible})},e.options.map(function(t,n){return a.default.createElement(s.default,{key:t,text:t,checked:-1!==e.selected.indexOf(t),focusing:n===e.focusing,position:n,onChange:e.onChange})}))};t.default=c},53:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=o(r),i=n(2),s=o(i),u=function(e){return a.default.createElement("li",{className:"query-input--option"},a.default.createElement("label",null,a.default.createElement("input",{className:"checkbox",type:"checkbox",tabIndex:-1,checked:e.checked,onChange:function(){e.onChange(e.position+1)}}),a.default.createElement("div",{className:(0,s.default)("query-input--option--container",{focus:e.focusing})},e.text)))};t.default=u},54:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),l=o(u),c=n(55),f=o(c),d=n(15),h=o(d),p=n(56),y=o(p),m=n(14),g=o(m),b=n(2),v=o(b),w=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.logger=new h.default("revert-selected",1),n.state={selected:[]},n.handleChange=function(e){var t=n.state.selected.filter(function(t){return!(0,g.default)(t,e)}),o=t.length<n.state.selected.length?t:t.concat([e]);n.logger.save(o),n.setState({selected:o})},n.handleUndo=function(){n.logger.canUndo&&n.setState({selected:n.logger.undo()})},n.handleRedo=function(){n.logger.canRedo&&n.setState({selected:n.logger.redo()})},n.handleSubmit=function(){if(n.state.selected.length>0){var e=n.state.selected.slice(0).sort(function(e,t){return e[1]-t[1]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return n.props.history[e[0]][e[1]]});n.setState({selected:[]}),n.logger.empty().save([]),n.props.onSubmit(e)}},n.logger.save([]),n}return i(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){e.visible&&!this.props.visible&&(this.logger.empty().save([]),this.setState({selected:[]})),this.positions=this.props.history.reduce(function(e,t,n){return e.concat(t.map(function(e,t){return[n,t]}))},[])}},{key:"render",value:function(){var e=this;return l.default.createElement(f.default,{visible:this.props.visible,onClose:this.props.onCancel,header:l.default.createElement("h1",null,l.default.createElement("i",{className:"fa fa-clock-o"}),"履歴"),footer:l.default.createElement("div",null,l.default.createElement("button",{className:(0,v.default)({enable:this.logger.canUndo}),onClick:this.handleUndo},l.default.createElement("i",{className:"fa fa-undo"})),l.default.createElement("button",{className:(0,v.default)({enable:this.logger.canRedo}),onClick:this.handleRedo},l.default.createElement("i",{className:"fa fa-repeat"})),l.default.createElement("button",{className:(0,v.default)("submit",{enable:this.state.selected.length}),onClick:this.handleSubmit},"決定"))},l.default.createElement("ul",{className:"history"},this.props.history.map(function(t,n){return l.default.createElement("li",{className:"history--group",key:n},l.default.createElement("ul",null,t.map(function(t,o){return l.default.createElement(y.default,{key:o,checked:-1!==e.state.selected.findIndex(function(e){return(0,g.default)(e,[n,o])}),position:[n,o],condition:t,onChange:e.handleChange})})))})))}}]),t}(l.default.Component);t.default=w},55:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.adjustScroll=function(){var t=e.content.scrollHeight-e.content.clientHeight;0===e.content.scrollTop&&e.content.scrollTo(0,1),e.content.scrollTop===t&&e.content.scrollTo(0,t-1)},e.preventBehindScroll=function(t){function n(e,t){if(e instanceof HTMLElement){if(e===t)return!0;if(e.parentElement)return n(e.parentElement,t)}return!1}var o=e.content.scrollHeight-e.content.clientHeight;e.props.visible&&(n(t.target,e.root)?t.stopPropagation():0!==e.content.scrollTop&&e.content.scrollTop!==o||t.preventDefault())},e.handleCloseClick=function(t){window.scrollTo(0,e.rootScrollPosition),e.props.onClose(t)},e.rootRef=function(t){e.root=t},e.contentRef=function(t){e.content=t},e}return a(t,e),i(t,[{key:"componentDidMount",value:function(){window.addEventListener("touchmove",this.preventBehindScroll),this.content.addEventListener("scroll",this.adjustScroll)}},{key:"componentWillReceiveProps",value:function(e){e.visible!==this.props.visible&&e.visible&&(this.content.scrollTo(0,1),this.rootScrollPosition=document.body.scrollTop||document.documentElement.scrollTop)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchmove",this.preventBehindScroll),this.content.removeEventListener("scroll",this.adjustScroll)}},{key:"render",value:function(){return u.default.createElement("div",{className:"modal "+this.props.className+" "+(this.props.visible?"modal--visible":""),ref:this.rootRef},u.default.createElement("div",{className:"modal--window"},this.props.header&&u.default.createElement("header",null,this.props.header),this.props.footer&&u.default.createElement("footer",null,this.props.footer),u.default.createElement("button",{className:"modal--close",onClick:this.handleCloseClick},u.default.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),u.default.createElement("div",{className:"modal--content",ref:this.contentRef},this.props.children)))}}]),t}(u.default.Component);t.default=l,l.defaultProps={className:""}},56:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=o(r),i=n(57),s=o(i),u=function(e){return a.default.createElement("li",{className:"query-condition"},a.default.createElement("label",null,a.default.createElement("input",{className:"checkbox",type:"checkbox",checked:e.checked,onChange:function(){e.onChange(e.position)}}),a.default.createElement(s.default,Object.assign({},e.condition))))};t.default=u},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(16),i=function(e){return r.default.createElement("div",{className:"condition"},r.default.createElement("p",{className:"condition--keywords"},e.keywords.join(" ")),r.default.createElement("p",{className:"condition--operator"},a.translate.ja[e.operator]))};t.default=i},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(e){return r.default.createElement("header",null,r.default.createElement("h1",null,r.default.createElement("i",{className:"fa fa-"+e.icon}),e.title),window.account&&r.default.createElement("img",{className:"user--icon",src:window.account.profile_image_url}))};t.default=a}},[48]);